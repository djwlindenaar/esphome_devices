substitutions:
  name: growatt

esphome:
  name: $name

#external_components:
#  - source: my_components

esp8266:
  board: espduino

# Enable logging
logger:
  baud_rate: 0

#web_server:
#  port: 80
# Enable Home Assistant API
api:
  password: ""
ota:
  password: ""
  platform: esphome

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  domain: !secret wifi_domain
  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: !secret hotspot_ssid
    password: !secret hotspot_password

captive_portal:

status_led:
  pin: GPIO2

light:
  - platform: binary
    name: "Blue LED"
    output: light_output_bl
  - platform: binary
    name: "Green LED"
    output: light_output_gn

output:
  - id: light_output_bl
    platform: gpio
    pin: GPIO16
  - id: light_output_gn
    platform: gpio
    pin: GPIO0

# Example configuration entry
uart:
  - id: uart_growatt
    baud_rate: 115200
    tx_pin: GPIO1
    rx_pin: GPIO3

modbus:
  uart_id: uart_growatt
  flow_control_pin: GPIO4

sensor:
  - platform: growatt_solar
    update_interval: 10s
    protocol_version: RTU2
    inverter_status:
      name: "Growatt Status Code"
    phase_a:
      voltage:
          name: "Growatt Voltage Phase"
      current:
          name: "Growatt Current Phase"
      active_power:
          name: "Growatt Power Phase"
    pv1:
      voltage:
          name: "Growatt PV1 Voltage"
      current:
          name: "Growatt PV1 Current"
      active_power:
          name: "Growatt PV1 Active Power"
    active_power:
      name: "Growatt Grid Active Power"
    pv_active_power:
      name: "Growatt PV Active Power"
    frequency:
      name: "Growatt Frequency"
    energy_production_day:
      name: "Growatt Today's Generation"
    total_energy_production:
      name: "Growatt Total Energy Production"
      accuracy_decimals: 1
    inverter_module_temp:
      name: "Growatt Inverter Module Temp"

